---
title: 路由（导航）
date: 2023-07-12 11:46:37
permalink: /pages/088c16
article: false
---

项目路由配置存放在 /scr/router/modules/ 目录下，每一个 ts 文件会被视为一个路由模块。配置好的路由模块最终会在 /src/router/routes.ts 文件里进行引入并放到主导航下。

## 基本配置

### 二级路由
一个路由模块包含以下结构：

```js

import type { Route } from '#/global';
const Layout = () => import('@/layouts/index.vue');

const routes: Route.recordRaw = {
  path: '/system_setting',
  component: Layout,
  redirect: '/system_setting/user',
  name: 'systemSetting',
  meta: {
    title: '系统设置',
    icon: 'local-sidebar_setting'
  },
  children: [
    {
      path: 'user',
      name: 'SysSettingUser',
      component: () => import('@/views/sys_setting_module/user/index.vue'),
      meta: {
        title: '账号管理',
        icon: 'local-sidebar_sys_user',
        cache: false
      }
    },
    {
      path: 'role',
      name: 'SysSettingRole',
      component: () => import('@/views/sys_setting_module/role/index.vue'),
      meta: {
        title: '角色管理',
        icon: 'local-sidebar_sys_role'
      }
    },
    {
      path: 'menu',
      name: 'SysSettingMenu',
      component: () => import('@/views/sys_setting_module/menu/index.vue'),
      meta: {
        title: '菜单管理',
        icon: 'local-sidebar_sys_menu'
      }
    },
    {
      path: 'resource',
      name: 'SysSettingResource',
      component: () => import('@/views/sys_setting_module/resource/index.vue'),
      meta: {
        title: '资源管理',
        icon: 'local-sidebar_sys_resource'
      }
    }
  ]
};

export default routes;
```

::: warning 注意事项⚠️
1. 整个项目所有路由的 name 不能重复
2. 一级路由的 component 需设置为 Layout ，并且 path 前面需要加 /，其余子路由都不要以 / 开头
   :::

### 多级路由
::: tip
多级路由最终都会转成二级路由并注册，但多级嵌套的层级结构会在侧边栏导航和面包屑导航中得到保留，其设计原因可阅读[《页面缓存》](/pages/9be742)。
   :::

多级路由的中间层级，可以无需设置 component 。

```js

import type { Route } from '#/global';
const Layout = () => import('@/layouts/index.vue');

const routes: Route.recordRaw = {
	path: '/example',
	component: Layout,
	redirect: '/example/level/index',
	name: 'Example',
	meta: {
		title: '演示'
	},
	children: [
		{
			path: 'level',
			name: 'ExampleLevel',
			meta: {
				title: '中间层级'
			},
			children: [
				{
					path: 'index',
					name: 'ExampleIndex',
					component: () => import('@/views/example/index.vue'),
					meta: {
						title: '演示页面'
					}
				}
			]
		}
	]
};

export default routes;

```
### 主导航

主导航并非路由的一部分，它只是将我们配置好的路由模块进行归类，在 /src/router/routes.ts 里进行设置。

```js
// 动态路由（异步路由、导航栏路由）
const asyncRoutes: Route.recordMainRaw[] = [
	{
		name: 'Setting',
		meta: {
			title: '设置',
			icon: 'local-sidebar_setting'
		},
		children: [SysSettingModule]
	},
	{
		name: 'Demonstration',
		meta: {
			title: '演示',
			icon: 'local-sidebar_institutional'
		},
		children: [DemonstrationModule]
	}
];

```
主导航只需设置 meta 和 children 两个参数，其中 meta 只接受 title、icon，children 则是存放我们配置的路由模块数据。

### 导航配置

框架的核心是通过路由的配置生成对应的导航，所以除了路由的基本配置外，还提供了针对导航的自定义配置，这些配置都存放在 meta 对象里。

#### title

| **类型** | **默认值** |                           **说明**                           |
|:------:|:-------:|:------------------------------------------------------------:|
| string |    /    |                  导航、面包屑导航以及页面中展示的标题 |

#### icon

| **类型** | **默认值** |                           **说明**                        |
|:------:|:-------:|:---------------------------------------------------------:|
| string |    /    |                  导航中显示的图标 |

#### sidebar

| **类型** | **默认值** |                           **说明**                        |
|:------:|:-------:|:---------------------------------------------------------:|
| boolean |  true   |                  该路由是否在侧边栏导航中展示 |

#### breadcrumb

| **类型** | **默认值** |                           **说明**                        |
|:------:|:-------:|:---------------------------------------------------------:|
| boolean |  true   |                  该路由是否在面包屑导航中展示 |

#### activeMenu

| **类型** | **默认值** |                           **说明**                        |
|:------:|:-------:|:---------------------------------------------------------:|
| string |    /    |                  指定高亮侧边栏路由，需要设置完整路由地址 |

该参数常与 sidebar: false 一起使用，因为路由不在侧边栏导航显示，会导致进入该路由后，侧边栏导航高亮效果失效，所以需要手动指定。

#### cache

| **类型** | **默认值** |                           **说明**                        |
|:------:|:-------:|:---------------------------------------------------------:|
| boolean / string / array	 |    /    |                 是否对该页面进行缓存 |

* boolean 设置为 true 时，该路由页面会被一直缓存
* string 设置某个目标路由的 name ，表示当前路由页面跳转到设置的 name 对应的路由页面时，则将当前路由页面进行缓存，否则不缓存
* array 同 string ，可设置一个目标路由的 name 数组

#### noCache

| **类型** | **默认值** |                           **说明**                        |
|:------:|:-------:|:---------------------------------------------------------:|
| string / array	 |    /    |                 是否对该页面清除缓存，须设置 cache 才会生效 |

* string 设置某个目标路由的 name ，表示当前路由页面跳转到设置的 name 对应的路由页面时，则将当前路由页面清除缓存，否则不清除缓存
* array 同 string ，可设置一个目标路由的 name 数组
