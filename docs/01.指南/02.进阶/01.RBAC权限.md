---
title: RBAC权限
date: 2023-07-12 15:02:52
permalink: /pages/8dfab5/
article: false
---

所谓 RBAC（Role Based Access Control）权限指的是基于角色的访问控制

<img src="/img/png/rbac.png" width = "100%" height = "auto" alt="图片名称" align=center />

### 菜单权限
菜单权限，即没有权限则该菜单页面无法访问，并且也不会在导航栏中显示。

需要通过给不同角色配置对应的菜单权限。

用户登录成功后获取用户关联角色的菜单权限组，根据权限动态生成路由。

但在实际业务中，遇到更多的情况通常是，可以访问路由页面。

但会根据不同权限，使用页面里的不同功能，这时候就需要用到下面的鉴权方式。

### 组件方式判断权限
页面中某个模块，当前用户具备该权限是如何显示，不具备该权限又是如何显示，针对这样的需求，提供了 `<Auth>` 和 `<AuthAll>` 组件，具体使用如下：

用户登录成功后获取用户关联角色的按钮权限组。
```vue
<!-- 单权限验证 -->
<Auth :value="'add:user:btn'">
  <el-button type="primary">新增用户</el-button>
</Auth>

<!-- 多权限验证，用户只要具备其中任何一个权限，则验证通过 -->
<Auth :value="['add:user:btn', 'edit:user:btn']">
  <el-button type="primary">新增用户</el-button>
</Auth>

<!-- 多权限验证，用户必须具备全部权限，才验证通过 -->
<AuthAll :value="['add:user:btn', 'edit:user:btn']">
  <p>你有该权限</p>
  <template #no-auth>
    <p>你没有该权限</p>
  </template>
</AuthAll>
```
### 指令方式判断权限
对于单个元素，也提供了 `v-auth` 和 `v-auth-all` 鉴权指令，使用上对比鉴权组件更方便，当然它能做的事情也更简单。

```vue
<!-- 单权限验证 -->
<button v-auth="'add:user:btn'">新增用户</button>

<!-- 多权限验证，用户只要具备其中任何一个权限，则验证通过 -->
<button v-auth="['add:user:btn', 'edit:user:btn']">新增用户</button>

<!-- 多权限验证，用户必须具备全部权限，才验证通过 -->
<button v-auth-all="['add:user:btn', 'edit:user:btn']">新增用户</button>
```
